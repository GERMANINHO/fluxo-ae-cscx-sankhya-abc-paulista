<!doctype html>
<html lang="pt-br">
<head>
  <meta charset="utf-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1" />
  <title>Fluxo AE — CS/CX — Sankhya ABC Paulista</title>

  <link href="https://fonts.googleapis.com/css2?family=Open+Sans+Condensed:wght@300;700&display=swap" rel="stylesheet">

  <style>
    :root{
      --bg:#f5f3e7;
      --text:#443c3d;

      --modal-bg:#ffffff;
      --overlay:rgba(0,0,0,.45);

      --btn-bg:#0f172a0f;
      --btn-border:#cbd5e1;
      --btn-hover:#0f172a14;
      --btn-text:#0f172a;
    }

    body{
      margin:0;
      background:var(--bg);
      color:var(--text);
      font-family:"Open Sans Condensed",system-ui,-apple-system,Segoe UI,Roboto,Helvetica,Arial;
    }

    .wrapper{ padding:50px 100px; }
    .svg-container{ position:relative; width:100%; padding-bottom:55%; overflow:hidden; background:var(--bg); }
    .svg-content{ position:absolute; inset:0; }

    .node{ cursor:pointer; outline:none; }
    .node-label{
      font-weight:900;
      fill:#f5f3e7;
      text-transform:uppercase;
      letter-spacing:.45px;
      font-size:10px;
      pointer-events:none;
    }
    .node-label.xs{ font-size:8px; }
    .node-label.xxs{ font-size:7px; }

    .edge--dotted{
      stroke:#333;
      stroke-width:2;
      stroke-dasharray:2 1;
      fill:none;
      stroke-linecap:round;
    }

    /* Modal */
    .modal{
      position:fixed; inset:0;
      display:none; align-items:center; justify-content:center;
      background:var(--overlay);
      z-index:999;
      padding:18px;
    }
    .modal.open{ display:flex; }
    .modal__panel{
      background:var(--modal-bg);
      color:var(--text);
      width:min(92vw,760px);
      border-radius:16px;
      box-shadow:0 10px 40px rgba(0,0,0,.25);
      padding:20px 20px 16px;
      border:1px solid #e2e8f0;
      max-height:86vh;
      overflow:auto;
    }
    .modal__header{
      display:flex; align-items:center; justify-content:space-between; gap:12px;
      margin-bottom:8px;
    }
    .modal__title{
      margin:0;
      font-size:20px;
      text-transform:uppercase;
      letter-spacing:.5px;
    }
    .modal__close{
      appearance:none;
      border:0;
      background:transparent;
      font-size:20px;
      line-height:1;
      padding:6px 10px;
      border-radius:8px;
      cursor:pointer;
      color:var(--btn-text);
    }
    .modal__close:hover{ background:#0001; }
    .modal__body{ padding:8px 2px 0; }
    .modal__body h3{ margin:12px 0 6px; font-size:16px; }
    .modal__body ul, .modal__body ol{ margin:8px 0 8px 18px; }

    .modal__actions{
      display:grid;
      grid-template-columns:1fr;
      gap:10px;
      margin-top:12px;
    }
    .btn{
      display:inline-block;
      text-decoration:none;
      text-align:center;
      padding:12px 16px;
      border-radius:12px;
      border:1px solid var(--btn-border);
      background:var(--btn-bg);
      color:var(--btn-text);
      font-weight:700;
      letter-spacing:.6px;
      text-transform:uppercase;
      transition: background .2s, box-shadow .2s, transform .06s;
    }
    .btn:hover,.btn:focus{ background:var(--btn-hover); box-shadow:0 0 0 2px #00000010 inset; }
    .btn:active{ transform:translateY(1px); }

    .callout{
      margin-top:10px;
      padding:10px 12px;
      border-radius:12px;
      background:#0f172a0a;
      border:1px dashed #94a3b8;
      font-size:14px;
    }

    code{ background:#00000010; padding:2px 6px; border-radius:8px; }
  </style>
</head>

<body>
  <div class="wrapper">
    <div class="svg-container">
      <svg viewBox="0 0 1000 520" class="svg-content" xmlns="http://www.w3.org/2000/svg">

        <!-- INÍCIO -->
        <g transform="translate(40,60)">
          <circle cx="55" cy="55" r="48" fill="#000"/>
          <text x="55" y="55" fill="#fff" font-size="22"
                text-anchor="middle" dominant-baseline="middle">INÍCIO</text>
        </g>

        <!-- INÍCIO -> PASSO 1 -->
        <line x1="143" y1="115" x2="210" y2="115" class="edge--dotted"/>

        <!-- PASSO 1 -->
        <g class="node" id="node-1" tabindex="0" role="button" aria-label="Abrir Passo 1"
           transform="translate(210,80)">
          <rect width="200" height="70" rx="8" fill="#66cc00"/>
          <text class="node-label xs" x="100" y="30" text-anchor="middle">
            <tspan x="100">PASSO 1</tspan>
            <tspan x="100" dy="16">SANKHYA — ACOMP. VISITA</tspan>
          </text>
        </g>

        <!-- PASSO 1 -> PASSO 2 -->
        <line x1="410" y1="115" x2="480" y2="115" class="edge--dotted"/>

        <!-- PASSO 2 -->
        <g class="node" id="node-2" tabindex="0" role="button" aria-label="Abrir Passo 2"
           transform="translate(480,80)">
          <rect width="200" height="70" rx="8" fill="#66cc00"/>
          <text class="node-label xs" x="100" y="30" text-anchor="middle">
            <tspan x="100">PASSO 2</tspan>
            <tspan x="100" dy="16">SENSE — AGENDAMENTO AE</tspan>
          </text>
        </g>

        <!-- PASSO 2 -> PASSO 3 -->
        <line x1="680" y1="115" x2="750" y2="115" class="edge--dotted"/>

        <!-- PASSO 3 -->
        <g class="node" id="node-3" tabindex="0" role="button" aria-label="Abrir Passo 3"
           transform="translate(750,80)">
          <rect width="220" height="70" rx="8" fill="#66cc00"/>
          <text class="node-label xxs" x="110" y="26" text-anchor="middle">
            <tspan x="110">PASSO 3</tspan>
            <tspan x="110" dy="14">SANKHYA OM — AE (NOVO)</tspan>
            <tspan x="110" dy="14">GERAR EXCEL + EMAIL → PDF</tspan>
          </text>
        </g>

        <!-- ✅ PASSO 3 -> PASSO 4 (ENTRANDO NO TOPO DO PASSO 4) -->
        <line x1="860" y1="150" x2="860" y2="260" class="edge--dotted"/>
        <line x1="860" y1="260" x2="350" y2="260" class="edge--dotted"/>
        <line x1="350" y1="260" x2="350" y2="290" class="edge--dotted"/>

        <!-- PASSO 4 (mais para baixo) -->
        <g class="node" id="node-4" tabindex="0" role="button" aria-label="Abrir Passo 4"
           transform="translate(210,290)">
          <rect width="280" height="70" rx="8" fill="#66cc00"/>
          <text class="node-label xxs" x="140" y="26" text-anchor="middle">
            <tspan x="140">PASSO 4</tspan>
            <tspan x="140" dy="14">SENSE — DIAGNÓSTICO + MONTAGEM</tspan>
            <tspan x="140" dy="14">ANEXAR EXCEL + PDF DO EMAIL</tspan>
          </text>
        </g>

        <!-- PASSO 4 -> PASSO 5 -->
        <line x1="490" y1="325" x2="560" y2="325" class="edge--dotted"/>

        <!-- PASSO 5 (mais para baixo) -->
        <g class="node" id="node-5" tabindex="0" role="button" aria-label="Abrir Passo 5"
           transform="translate(560,290)">
          <rect width="260" height="70" rx="8" fill="#66cc00"/>
          <text class="node-label xs" x="130" y="30" text-anchor="middle">
            <tspan x="130">PASSO 5</tspan>
            <tspan x="130" dy="16">SENSE — APRESENTAÇÃO PLANO</tspan>
          </text>
        </g>

        <!-- PASSO 5 -> FIM (encostando) -->
        <line x1="820" y1="325" x2="897" y2="325" class="edge--dotted"/>

        <!-- FIM -->
        <g transform="translate(890,270)">
          <circle cx="55" cy="55" r="48" fill="#000"/>
          <text x="55" y="55" fill="#fff" font-size="22"
                text-anchor="middle" dominant-baseline="middle">FIM</text>
        </g>
      </svg>
    </div>
  </div>

  <!-- Modal -->
  <div class="modal" id="modal" aria-hidden="true" role="dialog" aria-modal="true" aria-labelledby="modal-title">
    <div class="modal__panel" role="document">
      <div class="modal__header">
        <h2 class="modal__title" id="modal-title">Etapa</h2>
        <button class="modal__close" type="button" id="modal-close" aria-label="Fechar">✕</button>
      </div>
      <div class="modal__body" id="modal-body"></div>
    </div>
  </div>

  <!-- Templates -->
  <template id="tpl-1">
    <p><strong>Onde:</strong> Sankhya Matriz — <em>CS - Acompanhamento Visita</em></p>
    <p><strong>Caminho:</strong> Dashboards » Customer Success » CS - Acompanhamento Visita</p>
    <p><strong>ID:</strong> <code>br.com.sankhya.menu.adicional.nuDsb.1003.1</code></p>

    <h3>Objetivo</h3>
    <p>Identificar quais empresas estão em atraso de AE e decidir qual cliente será atendido.</p>
  </template>

  <template id="tpl-2">
    <p><strong>Onde:</strong> SenseData — dentro do cliente escolhido</p>
    <h3>Ação</h3>
    <ul>
      <li>Adicionar o <strong>Playbook do AE</strong>.</li>
      <li>Criar/Preencher a atividade: <strong>Agendamento</strong>.</li>
    </ul>

    <div class="modal__actions">
      <a class="btn" target="_blank" rel="noopener noreferrer" href="https://sankhya.sensedata.io/portfolio">
        Abrir SenseData (Portfolio)
      </a>
    </div>
  </template>

  <template id="tpl-3">
    <p><strong>Onde:</strong> Sankhya OM — <em>CS - Acompanhamento Evolutivo (Novo)</em></p>
    <p><strong>Caminho:</strong> Analytics AI » SankhyaMitraBI 04-04-2024 » CX » CS - Acompanhamento Evolutivo (Novo)</p>
    <p><strong>ID:</strong> <code>br.com.sankhya.analytics2.new.sc.t_4312.5.2265</code></p>

    <h3>Objetivo</h3>
    <ol>
      <li>Analisar Informações do Cliente + Visão de Uso + Indicadores/Terceiros + Guia do CS.</li>
      <li>Definir foco/ondas e melhorias.</li>
      <li><strong>Gerar o Excel</strong> do plano.</li>
      <li><strong>Enviar o Excel por e-mail ao cliente</strong>.</li>
      <li><strong>Salvar/gerar o PDF do e-mail</strong> (evidência).</li>
    </ol>

    <div class="callout">
      <strong>Saída obrigatória para o próximo passo (SenseData):</strong>
      <ul>
        <li>Excel do Plano</li>
        <li>PDF do e-mail enviado (evidência)</li>
      </ul>
    </div>
  </template>

  <template id="tpl-4">
    <p><strong>Onde:</strong> SenseData — atividade do Playbook AE</p>
    <p><strong>Atividade:</strong> <strong>Diagnóstico e Montagem do Plano de Evolução</strong></p>

    <h3>O que anexar (obrigatório)</h3>
    <ul>
      <li><strong>Excel</strong> do Plano</li>
      <li><strong>PDF do e-mail</strong> enviado ao cliente (evidência)</li>
    </ul>

    <h3>Anotações (modelo recomendado)</h3>
    <p>
      “A etapa de Diagnóstico e Montagem do Plano de Ação será realizada no Sankhya OM, por meio da tela
      CS - Acompanhamento Evolutivo (Novo). Leia atentamente a documentação no Link.”
    </p>

    <div class="modal__actions">
      <a class="btn" target="_blank" rel="noopener noreferrer" href="https://sankhya.sensedata.io/portfolio">
        Abrir SenseData (Portfolio)
      </a>
    </div>
  </template>

  <template id="tpl-5">
    <p><strong>Onde:</strong> SenseData — atividade do Playbook AE</p>
    <p><strong>Atividade:</strong> <strong>Apresentação do Plano de Evolução</strong></p>

    <h3>Objetivo</h3>
    <p>Apresentar o plano ao cliente, destacando as <strong>principais melhorias</strong>, priorização, responsáveis e horas.</p>

    <div class="modal__actions">
      <a class="btn" target="_blank" rel="noopener noreferrer" href="https://sankhya.sensedata.io/portfolio">
        Abrir SenseData (Portfolio)
      </a>
    </div>
  </template>

  <script>
    (function(){
      const modal = document.getElementById('modal');
      const modalTitle = document.getElementById('modal-title');
      const modalBody = document.getElementById('modal-body');
      const btnClose = document.getElementById('modal-close');

      const nodes = [
        { id:'node-1', title:'Passo 1 — Sankhya (Acompanhamento Visita)', tpl:'tpl-1' },
        { id:'node-2', title:'Passo 2 — SenseData (Agendamento AE)', tpl:'tpl-2' },
        { id:'node-3', title:'Passo 3 — Sankhya OM (AE Novo: Excel + Email → PDF)', tpl:'tpl-3' },
        { id:'node-4', title:'Passo 4 — SenseData (Diagnóstico + Montagem: anexos)', tpl:'tpl-4' },
        { id:'node-5', title:'Passo 5 — SenseData (Apresentação do Plano)', tpl:'tpl-5' },
      ];

      let lastTrigger = null;

      function openModal(title, templateId, triggerEl){
        const tpl = document.getElementById(templateId);
        if (!tpl) return;

        lastTrigger = triggerEl || null;
        modalTitle.textContent = title;
        modalBody.innerHTML = tpl.innerHTML;

        modal.classList.add('open');
        modal.setAttribute('aria-hidden','false');

        document.documentElement.style.overflow='hidden';
        document.body.style.overflow='hidden';
      }

      function closeModal(){
        modal.classList.remove('open');
        modal.setAttribute('aria-hidden','true');
        modalBody.innerHTML = '';

        document.documentElement.style.overflow='';
        document.body.style.overflow='';

        if (lastTrigger && lastTrigger.focus) lastTrigger.focus();
      }

      nodes.forEach(n=>{
        const el = document.getElementById(n.id);
        if (!el) return;

        el.addEventListener('click', ()=>openModal(n.title, n.tpl, el));
        el.addEventListener('keydown', (e)=>{
          if (e.key==='Enter' || e.key===' '){
            e.preventDefault();
            openModal(n.title, n.tpl, el);
          }
        });
      });

      btnClose.addEventListener('click', closeModal);
      modal.addEventListener('click', (e)=>{ if (e.target === modal) closeModal(); });

      document.addEventListener('keydown', (e)=>{
        if (e.key === 'Escape' && modal.classList.contains('open')) closeModal();
      });

      document.addEventListener('click', (e)=>{
        const a = e.target.closest('a.btn');
        if (a && modal.classList.contains('open')) {
          setTimeout(closeModal, 50);
        }
      });
    })();
  </script>
</body>
</html>
